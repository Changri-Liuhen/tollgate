<?xml version="1.0"?>
<scxml xmlns="https://www.w3.org/2005/07/scxml" version="1.0" initial="approached">

    <state id="approached">
        <transition event="vehicle.recognized" target="recognized" />
        <transition event="vehicle.unrecognized" target="approached" />
    </state>

    <state id="recognized">
        <transition event="vehicle.validated" target="validated" />
        <transition event="vehicle.invalidate" target="recognized" />
    </state>

    <state id="validated">
        <transition event="vehicle.billfailure" target="validated" />
        <transition event="vehicle.billing" target="billed" />
    </state>

    <state id="billed">
        <transition event="vehicle.paid" target="paid" />
    </state>

    <state id="paid">
        <transition event="vehicle.leave" target="left" />
    </state>

    <final id="left" />

</scxml>